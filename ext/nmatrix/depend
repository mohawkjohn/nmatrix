nmatrix.h smmp1.c smmp2.c blas.c csquare.c: generator.rb nmatrix.pre.h nmatrix.post.h
	$(RUBY) -I$(srcdir) $(srcdir)/generator.rb

csquare.o: csquare.c

dfuncs.o: dfuncs.c nmatrix.h

$(DLLIB): nmatrix.h $(OBJS) Makefile
	# $(ECHO) linking shared-object $(DLLIB)
	@-$(RM) $(@)
	$(Q) $(LDSHARED) -o $@ $(OBJS) $(LIBPATH) $(DLDFLAGS) $(LOCAL_LIBS) $(LIBS)

soclean:
	@-$(RM) *.so *.o *.bundle
